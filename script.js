const questions = [
    // --- 20 سؤال صح وغلط ---
    { q: "المحاسبة هي نظام للمعلومات يقوم بتحديد وقياس وتوصيل المعلومات المالية.", a: ["صح", "غلط"], c: "صح" },
    { q: "المستثمرون والبنوك يعتبرون من المستخدمين الداخليين للمعلومات المحاسبية.", a: ["صح", "غلط"], c: "غلط" },
    { q: "فرض الشخصية المعنوية يعني أن للمنشأة كيان قانوني مستقل عن صاحبها.", a: ["صح", "غلط"], c: "صح" },
    { q: "مبدأ التكلفة التاريخية يعني تسجيل الأصول بقيمتها السوقية الحالية.", a: ["صح", "غلط"], c: "غلط" },
    { q: "الأصول = الالتزامات + حقوق الملكية هي معادلة الميزانية.", a: ["صح", "غلط"], c: "صح" },
    { q: "المسحوبات الشخصية تؤدي إلى زيادة حقوق الملكية.", a: ["صح", "غلط"], c: "غلط" },
    { q: "أساس الاستحقاق يسجل العمليات عند حدوثها بغض النظر عن الدفع النقدي.", a: ["صح", "غلط"], c: "صح" },
    { q: "المصروفات بطبيعتها حسابات دائنة.", a: ["صح", "غلط"], c: "غلط" },
    { q: "مبدأ الحيطة والحذر يعني أخذ الخسائر المتوقعة في الاعتبار.", a: ["صح", "غلط"], c: "صح" },
    { q: "دفتر الأستاذ هو الدفتر الذي تسجل فيه العمليات يومياً حسب تسلسلها.", a: ["صح", "غلط"], c: "غلط" },
    { q: "المدينون يعتبرون من الأصول المتداولة للمنشأة.", a: ["صح", "غلط"], c: "صح" },
    { q: "رأس المال يمثل حقوق أصحاب المنشأة تجاه أصولها.", a: ["صح", "غلط"], c: "صح" },
    { q: "ميزان المراجعة يعتبر من القوائم المالية الختامية.", a: ["صح", "غلط"], c: "غلط" },
    { q: "الزيادة في الأصل تجعل الحساب مديناً.", a: ["صح", "غلط"], c: "صح" },
    { q: "الزيادة في الالتزامات تجعل الحساب دائناً.", a: ["صح", "غلط"], c: "صح" },
    { q: "المحاسبة المالية تهدف لخدمة الأطراف الخارجية مثل الضرائب والبنوك.", a: ["صح", "غلط"], c: "صح" },
    { q: "قائمة الدخل تظهر المركز المالي للمنشأة في تاريخ معين.", a: ["صح", "غلط"], c: "غلط" },
    { q: "الأراضي من الأصول الثابتة التي لا يتم حساب إهلاك لها.", a: ["صح", "غلط"], c: "صح" },
    { q: "أوراق الدفع تعتبر من أصول المنشأة.", a: ["صح", "غلط"], c: "غلط" },
    { q: "فرض الفترة المحاسبية يعني تقسيم حياة المنشأة لفترات زمنية متساوية.", a: ["صح", "غلط"], c: "صح" },

    // --- 20 سؤال اختر من متعدد ---
    { q: "أي مما يلي يعتبر من الأصول الثابتة؟", a: ["البنك", "السيارات", "المدينون", "المخزون"], c: "السيارات" },
    { q: "الديون التي تطالب بها المنشأة الغير تسمى:", a: ["دائنون", "مدينون", "قروض", "أوراق دفع"], c: "مدينون" },
    { q: "شراء أثاث نقداً يؤدي إلى:", a: ["زيادة أصل ونقص أصل", "زيادة أصل وزيادة التزام", "نقص أصل"], c: "زيادة أصل ونقص أصل" },
    { q: "الحسابات التي تجعل الطرف المدين يزيد هي:", a: ["الإيرادات", "الالتزامات", "المصروفات", "رأس المال"], c: "المصروفات" },
    { q: "الفرق بين الأصول والالتزامات يسمى:", a: ["صافي الربح", "حقوق الملكية", "المسحوبات"], c: "حقوق الملكية" },
    { q: "بدأ نشاطه بإيداع مبلغ في البنك، الطرف المدين هو:", a: ["ح/رأس المال", "ح/البنك", "ح/الخزينة"], c: "ح/البنك" },
    { q: "سداد فاتورة الكهرباء نقداً تجعل حساب الخزينة:", a: ["مديناً", "دائناً", "لا يتأثر"], c: "دائناً" },
    { q: "مبدأ يقضي بالإفصاح عن كافة المعلومات المالية الهامة:", a: ["الثبات", "الإفصاح", "المقابلة"], c: "الإفصاح" },
    { q: "أي القوائم التالية توضح نتيجة نشاط المنشأة من ربح أو خسارة؟", a: ["الميزانية", "قائمة الدخل", "قائمة التدفقات"], c: "قائمة الدخل" },
    { q: "ترحيل العمليات يتم من دفتر اليومية إلى:", a: ["الميزانية", "دفتر الأستاذ", "ميزان المراجعة"], c: "دفتر الأستاذ" },
    { q: "إذا كانت الأصول 50,000 والخصوم 20,000 فإن حقوق الملكية:", a: ["70,000", "30,000", "20,000"], c: "30,000" },
    { q: "أوراق القبض تصنف كـ:", a: ["أصل متداول", "أصل ثابت", "التزام"], c: "أصل متداول" },
    { q: "سحب صاحب المنشأة نقدية لاستخدامه الخاص يسمى:", a: ["مصروفات", "مسحوبات شخصية", "خسارة"], c: "مسحوبات شخصية" },
    { q: "زيادة رأس المال تجعل الحساب دائماً:", a: ["مديناً", "دائناً", "صفراً"], c: "دائناً" },
    { q: "المصطلح المحاسبي للمبالغ التي على المنشأة للموردين:", a: ["المدينون", "الدائنون", "الأصول"], c: "الدائنون" },
    { q: "أي مما يلي يعتبر من الالتزامات طويلة الأجل؟", a: ["أوراق دفع", "قروض بنكية طويلة", "دائنون"], c: "قروض بنكية طويلة" },
    { q: "المبدأ الذي يقابل الإيرادات بالمصروفات المرتبطة بها:", a: ["التكلفة التاريخية", "المقابلة", "التحقق"], c: "المقابلة" },
    { q: "قاعدة القيد المزدوج تعني وجود طرفين هما:", a: ["مدين ودائن", "كلاهما مدين", "كلاهما دائن"], c: "مدين ودائن" },
    { q: "عند بيع بضاعة نقداً، الطرف المدين هو:", a: ["ح/المبيعات", "ح/الخزينة", "ح/البنك"], c: "ح/الخزينة" },
    { q: "الحساب الذي رصيده يظهر في الجانب الأيمن من الميزانية:", a: ["رأس المال", "الأراضي", "القروض"], c: "الأراضي" },

    // --- 20 سؤال مقالي مطور (أسئلة فهم) ---
    { q: "ما هي الوظيفة الأساسية للمحاسبة المالية؟", a: ["إنتاج معلومات للأطراف الخارجية", "دفع الرواتب", "تنظيم العمال"], c: "إنتاج معلومات للأطراف الخارجية" },
    { q: "لماذا يعتبر فرض الاستمرار هاماً في المحاسبة؟", a: ["لتقييم الأصول بالتكلفة التاريخية", "لتصفية الشركة", "لزيادة الضرائب"], c: "لتقييم الأصول بالتكلفة التاريخية" },
    { q: "ما الفرق الجوهري بين المحاسبة المالية والمحاسبة الإدارية؟", a: ["الأطراف المستفيدة", "عدد الموظفين", "نوع العملة"], c: "الأطراف المستفيدة" },
    { q: "ما المقصود بأساس الاستحقاق؟", a: ["تسجيل العمليات فور وقوعها", "تسجيل عند الدفع فقط", "تسجيل عند الربح"], c: "تسجيل العمليات فور وقوعها" },
    { q: "لماذا تظهر المسحوبات في الجانب المدين؟", a: ["لأنها تخفض حقوق الملكية", "لأنها تزيد الأصول", "لأنها إيراد"], c: "لأنها تخفض حقوق الملكية" },
    { q: "ما هو دور ميزان المراجعة في الدورة المحاسبية؟", a: ["التأكد من التوازن الحسابي للقيود", "توزيع الأرباح", "حساب الضرائب"], c: "التأكد من التوازن الحسابي للقيود" },
    { q: "ماذا تعني 'الموثوقية' في المعلومات المحاسبية؟", a: ["إمكانية التثبت من صحتها", "سرعة الحصول عليها", "جمال التنسيق"], c: "إمكانية التثبت من صحتها" },
    { q: "كيف يتم الاعتراف بالإيراد في المحاسبة؟", a: ["بمجرد تقديم الخدمة أو البيع", "عند استلام الكاش فقط", "عند التفكير في البيع"], c: "بمجرد تقديم الخدمة أو البيع" },
    { q: "ما هو الفرق بين المدينين والدائنين؟", a: ["المدينون أصل والدائنون التزام", "كلاهما أصل", "كلاهما التزام"], c: "المدينون أصل والدائنون التزام" },
    { q: "ما هي قائمة المركز المالي (الميزانية)؟", a: ["تقرير يوضح الأصول والالتزامات", "تقرير يوضح الأرباح", "دفتر يومية"], c: "تقرير يوضح الأصول والالتزامات" },
    { q: "ما هو الحساب الذي يمثل المبالغ المستحقة بموجب كمبيالة؟", a: ["أوراق القبض أو الدفع", "حساب البنك", "المصروفات"], c: "أوراق القبض أو الدفع" },
    { q: "ماذا يحدث لمعادلة الميزانية عند سداد التزام نقداً؟", a: ["نقص أصل ونقص التزام", "زيادة أصل", "لا تتأثر"], c: "نقص أصل ونقص التزام" },
    { q: "ما هي 'الدورة المحاسبية'؟", a: ["خطوات تبدأ بالعملية وتنتهي بالقوائم", "دوران الأموال", "سنة ميلادية"], c: "خطوات تبدأ بالعملية وتنتهي بالقوائم" },
    { q: "لماذا يعتبر رأس المال دائناً بطبيعته؟", a: ["لأنه يمثل التزام المنشأة تجاه المالك", "لأنه أصل", "لأنه مصروف"], c: "لأنه يمثل التزام المنشأة تجاه المالك" },
    { q: "ما المقصود بمبدأ الإفصاح التام؟", a: ["نشر جميع المعلومات الجوهرية", "نشر الأرباح فقط", "إخفاء الخسائر"], c: "نشر جميع المعلومات الجوهرية" },
    { q: "ماذا يعني 'قيد اليومية'؟", a: ["تسجيل العملية في طرفين مدين ودائن", "رسم بياني للأرباح", "فاتورة بيع"], c: "تسجيل العملية في طرفين مدين ودائن" },
    { q: "من هو المستفيد الأول من المحاسبة الضريبية؟", a: ["مصلحة الضرائب", "المدير المالي", "المساهمون"], c: "مصلحة الضرائب" },
    { q: "ما هو 'الأصل المتداول'؟", a: ["أصل يتوقع تحويله لنقدية خلال سنة", "أصل ثابت كالمباني", "دين للغير"], c: "أصل يتوقع تحويله لنقدية خلال سنة" },
    { q: "كيف نحدد صافي الربح في المحاسبة؟", a: ["طرح المصروفات من الإيرادات", "جمع الأصول", "ضرب الخصوم في 2"], c: "طرح المصروفات من الإيرادات" },
    { q: "ماذا تعني 'الموضوعية' في المحاسبة؟", a: ["الاعتماد على مستندات واقعية", "الاعتماد على التقدير الشخصي", "السرعة"], c: "الاعتماد على مستندات واقعية" }
];

let currentIdx = 0;
let score = 0;
let shuffledQs = [];

const qEl = document.getElementById('question');
const optEl = document.getElementById('options');
const nextBtn = document.getElementById('next-btn');
const scoreEl = document.getElementById('score');
const countEl = document.getElementById('q-count');
const progress = document.getElementById('progress');

function startQuiz() {
    shuffledQs = [...questions].sort(() => Math.random() - 0.5);
    currentIdx = 0;
    score = 0;
    renderQuestion();
}

function renderQuestion() {
    optEl.innerHTML = '';
    nextBtn.classList.add('hide');
    let q = shuffledQs[currentIdx];
    qEl.innerText = q.q;
    countEl.innerText = currentIdx + 1;
    progress.style.width = `${((currentIdx + 1) / shuffledQs.length) * 100}%`;

    q.a.forEach(option => {
        const btn = document.createElement('button');
        btn.innerText = option;
        btn.classList.add('option');
        btn.onclick = () => {
            if (option === q.c) {
                btn.classList.add('correct');
                score++;
                scoreEl.innerText = score;
            } else {
                btn.classList.add('wrong');
                Array.from(optEl.children).forEach(b => {
                    if (b.innerText === q.c) b.classList.add('correct');
                });
            }
            Array.from(optEl.children).forEach(b => b.disabled = true);
            nextBtn.classList.remove('hide');
        };
        optEl.appendChild(btn);
    });
}

nextBtn.onclick = () => {
    currentIdx++;
    if (currentIdx < shuffledQs.length) {
        renderQuestion();
        window.scrollTo(0, 0);
    } else {
        qEl.innerText = `انتهى الاختبار! حصلت على ${score} من ${shuffledQs.length}`;
        optEl.innerHTML = `<button onclick="location.reload()" style="width:100%; padding:15px; background:var(--success); color:white; border:none; border-radius:10px;">إعادة المحاولة</button>`;
        nextBtn.classList.add('hide');
    }
};

document.addEventListener('DOMContentLoaded', startQuiz);
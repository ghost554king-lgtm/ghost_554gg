const questions = [
    // --- الفصل الأول: الإطار العام للمحاسبة ---
    { q: "المحاسبة هي فن تسجيل وتبويب وتلخيص العمليات المالية", a: ["صح", "غلط"], c: "صح" },
    { q: "المستفيد الداخلي من المعلومات المحاسبية هم المستثمرون والبنوك", a: ["صح", "غلط"], c: "غلط" },
    { q: "المحاسبة المالية تهدف لخدمة الأطراف الخارجية بشكل أساسي", a: ["صح", "غلط"], c: "صح" },
    { q: "من خصائص المعلومات المحاسبية الملاءمة والموثوقية", a: ["صح", "غلط"], c: "صح" },
    { q: "المنشأة الفردية هي التي يملكها شخص واحد ويكون مسؤولاً عن ديونها", a: ["صح", "غلط"], c: "صح" },
    { q: "المحاسبة تقتصر فقط على مسك الدفاتر", a: ["صح", "غلط"], c: "غلط" },
    { q: "وظيفة التبويب تعني ترحيل العمليات إلى حساباتها في دفتر الأستاذ", a: ["صح", "غلط"], c: "صح" },
    { q: "المحاسبة تعتبر نظاماً للمعلومات", a: ["صح", "غلط"], c: "صح" },
    { q: "يهتم الملاك بمتابعة مدى نجاح الإدارة في تحقيق الأرباح", a: ["صح", "غلط"], c: "صح" },
    { q: "المحاسبة الضريبية تهدف لتحديد الدخل الخاضع للضريبة", a: ["صح", "غلط"], c: "صح" },

    // --- الفصل الثاني: الفروض والمبادئ المحاسبية ---
    { q: "فرض الشخصية المعنوية يعني انفصال ذمة صاحب المنشأة عن المنشأة نفسها", a: ["صح", "غلط"], c: "صح" },
    { q: "فرض الاستمرار يفترض أن المنشأة ستبقى لفترة غير محددة", a: ["صح", "غلط"], c: "صح" },
    { q: "مبدأ التكلفة التاريخية يقضي بتسجيل الأصول بسعر شرائها الأصلي", a: ["صح", "غلط"], c: "صح" },
    { q: "مبدأ المقابلة يعني مقابلة إيرادات الفترة بمصروفاتها", a: ["صح", "غلط"], c: "صح" },
    { q: "مبدأ الحيطة والحذر يعني تجاهل الخسائر المتوقعة", a: ["صح", "غلط"], c: "غلط" },
    { q: "فرض الوحدة النقدية يعني استخدام النقود كوحدة قياس محاسبي", a: ["صح", "غلط"], c: "صح" },
    { q: "مبدأ الإفصاح يعني إظهار كافة المعلومات المالية الهامة", a: ["صح", "غلط"], c: "صح" },
    { q: "فرض الفترة المحاسبية يعني تقسيم حياة المنشأة إلى فترات زمنية متساوية", a: ["صح", "غلط"], c: "صح" },
    { q: "مبدأ التحقق يعني عدم تسجيل الإيراد إلا بعد تحققه فعلياً", a: ["صح", "غلط"], c: "صح" },
    { q: "مبدأ الثبات يعني تغيير السياسات المحاسبية كل سنة", a: ["صح", "غلط"], c: "غلط" },

    // --- الفصل الثالث: الدورة المحاسبية والقيد المزدوج ---
    { q: "معادلة الميزانية هي: الأصول = الالتزامات + حقوق الملكية", a: ["صح", "غلط"], c: "صح" },
    { q: "الأصول هي موارد تملكها المنشأة ولها قيمة اقتصادية", a: ["صح", "غلط"], c: "صح" },
    { q: "الخصوم (الالتزامات) تمثل حقوق أصحاب المنشأة", a: ["صح", "غلط"], c: "غلط" },
    { q: "نقص الأصل يجعله دائناً وفق قاعدة القيد المزدوج", a: ["صح", "غلط"], c: "صح" },
    { q: "الزيادة في المصروفات تجعل الحساب دائناً", a: ["صح", "غلط"], c: "غلط" },
    { q: "دفتر اليومية هو الدفتر الذي يتم فيه تسجيل العمليات أولاً بأول", a: ["صح", "غلط"], c: "صح" },
    { q: "العملية المالية التي تؤدي لزيادة أصل ونقص أصل آخر توازن الميزانية", a: ["صح", "غلط"], c: "صح" },
    { q: "المسحوبات الشخصية تزيد من حقوق الملكية", a: ["صح", "غلط"], c: "غلط" },
    { q: "الحسابات التي طبيعتها مدينة هي الأصول والمصروفات", a: ["صح", "غلط"], c: "صح" },
    { q: "ميزان المراجعة هو كشف بأسماء وأرصدة الحسابات للتأكد من توازنها", a: ["صح", "غلط"], c: "صح" },

    // --- أسئلة اختيار من متعدد (تغطية الفصول الثلاثة) ---
    { q: "أي مما يلي يعتبر من الأصول المتداولة؟", a: ["الأراضي", "الآلات", "البنك", "القروض"], c: "البنك" },
    { q: "شراء سيارة نقداً يؤدي إلى:", a: ["زيادة أصل ونقص أصل", "زيادة أصل وزيادة التزام", "نقص أصل ونقص التزام"], c: "زيادة أصل ونقص أصل" },
    { q: "الديون التي على المنشأة للغير تسمى:", a: ["أصول", "حقوق ملكية", "التزامات"], c: "التزامات" },
    { q: "المبدأ الذي يقضي بتسجيل العمليات بمجرد وقوعها بصرف النظر عن الدفع:", a: ["الأساس النقدي", "أساس الاستحقاق", "مبدأ الثبات"], c: "أساس الاستحقاق" },
    { q: "الجانب الأيمن من الحساب يسمى:", a: ["مدين", "دائن", "رصيد"], c: "مدين" },
    { q: "أي الحسابات التالية رصيده الطبيعي دائن؟", a: ["المشتريات", "المبيعات", "الأثاث", "الرواتب"], c: "المبيعات" },
    { q: "زيادة رأس المال تجعل الحساب:", a: ["مديناً", "دائناً", "لا يتأثر"], c: "دائناً" },
    { q: "المصدر الأساسي للقيد في دفتر اليومية هو:", a: ["دفتر الأستاذ", "المستندات", "الميزانية"], c: "المستندات" },
    { q: "المنفعة المتبادلة بين الحسابات هي أساس قاعدة:", a: ["القيد المفرد", "القيد المزدوج", "المعادلة المحاسبية"], c: "القيد المزدوج" },
    { q: "إذا بدأت المنشأة أعمالها برأس مال 100,000 ج أودع البنك، القيد هو:", a: ["من ح/البنك إلى ح/رأس المال", "من ح/رأس المال إلى ح/البنك"], c: "من ح/البنك إلى ح/رأس المال" },
    
    // إكمال لـ 60 سؤالاً (تم تكرار أنماط الأسئلة لتغطية كافة تفاصيل الكتاب)
    { q: "المحاسبة الإدارية توفر معلومات للجهات الخارجية", a: ["صح", "غلط"], c: "غلط" },
    { q: "الأراضي من الأصول الثابتة التي لا تستهلك عادة", a: ["صح", "غلط"], c: "صح" },
    { q: "الميزانية العمومية توضح المركز المالي للمنشأة في تاريخ معين", a: ["صح", "غلط"], c: "صح" },
    { q: "قائمة الدخل تهدف لقياس صافي الربح أو الخسارة", a: ["صح", "غلط"], c: "صح" },
    { q: "الدائنون هم الأشخاص الذين تطالبهم المنشأة بالمال", a: ["صح", "غلط"], c: "غلط" },
    { q: "المدينون يعتبرون من الأصول المتداولة", a: ["صح", "غلط"], c: "صح" },
    { q: "أوراق القبض تمثل التزامات على المنشأة", a: ["صح", "غلط"], c: "غلط" },
    { q: "أوراق الدفع تعتبر من الالتزامات المتداولة", a: ["صح", "غلط"], c: "صح" },
    { q: "القرض طويل الأجل يعتبر التزاماً غير متداول", a: ["صح", "غلط"], c: "صح" },
    { q: "رأس المال يمثل الفرق بين الأصول والالتزامات", a: ["صح", "غلط"], c: "صح" },
    { q: "الترقيم في دفتر الأستاذ يساعد في عملية المراجعة", a: ["صح", "غلط"], c: "صح" },
    { q: "ميزان المراجعة بالمجاميع يضمن صحة الترحيل تماماً", a: ["صح", "غلط"], c: "غلط" },
    { q: "الخطأ في تسمية الحساب لا يكتشفه ميزان المراجعة", a: ["صح", "غلط"], c: "صح" },
    { q: "المصروفات تجعل رأس المال ينقص", a: ["صح", "غلط"], c: "صح" },
    { q: "الإيرادات تجعل رأس المال يزيد", a: ["صح", "غلط"], c: "صح" },
    { q: "المحاسبة كنظام تشمل مدخلات وتشغيل ومخرجات", a: ["صح", "غلط"], c: "صح" },
    { q: "المخرجات في المحاسبة هي التقارير والقوائم المالية", a: ["صح", "غلط"], c: "صح" },
    { q: "المعادلة المحاسبية يجب أن تكون متوازنة دائماً", a: ["صح", "غلط"], c: "صح" },
    { q: "دورة المحاسبة تبدأ بالعملية المالية وتنتهي بالقوائم المالية", a: ["صح", "غلط"], c: "صح" },
    { q: "القيد الافتتاحي هو أول قيد يسجل في بداية حياة المنشأة", a: ["صح", "غلط"], c: "صح" }
];

let currentIdx = 0;
let score = 0;
let shuffledQs = [];

const qEl = document.getElementById('question');
const optEl = document.getElementById('options');
const nextBtn = document.getElementById('next-btn');
const scoreEl = document.getElementById('score');
const countEl = document.getElementById('q-count');
const progress = document.getElementById('progress');

function startQuiz() {
    shuffledQs = [...questions].sort(() => Math.random() - 0.5);
    currentIdx = 0;
    score = 0;
    renderQuestion();
}

function renderQuestion() {
    optEl.innerHTML = '';
    nextBtn.classList.add('hide');
    let q = shuffledQs[currentIdx];
    qEl.innerText = q.q;
    countEl.innerText = currentIdx + 1;
    progress.style.width = `${((currentIdx + 1) / shuffledQs.length) * 100}%`;

    q.a.forEach(option => {
        const btn = document.createElement('button');
        btn.innerText = option;
        btn.classList.add('option');
        btn.onclick = () => {
            if (option === q.c) {
                btn.classList.add('correct');
                score++;
                scoreEl.innerText = score;
            } else {
                btn.classList.add('wrong');
                Array.from(optEl.children).forEach(b => {
                    if (b.innerText === q.c) b.classList.add('correct');
                });
            }
            Array.from(optEl.children).forEach(b => b.disabled = true);
            nextBtn.classList.remove('hide');
        };
        optEl.appendChild(btn);
    });
}

nextBtn.onclick = () => {
    currentIdx++;
    if (currentIdx < shuffledQs.length) {
        renderQuestion();
        window.scrollTo(0, 0);
    } else {
        qEl.innerText = `انتهى الاختبار! حصلت على ${score} من ${shuffledQs.length}`;
        optEl.innerHTML = `<button onclick="location.reload()" style="width:100%; padding:15px; background:var(--success); color:white; border:none; border-radius:12px; cursor:pointer; font-weight:bold;">إعادة الاختبار</button>`;
        nextBtn.classList.add('hide');
    }
};

document.addEventListener('DOMContentLoaded', startQuiz);
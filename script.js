const questions = [
    // --- مجموعة الصح والغلط (28 سؤال) ---
    { q: "قانون الطلب يوضح العلاقة الطردية بين السعر والكمية المطلوبة", a: ["صح", "غلط"], c: "غلط" },
    { q: "الدخل الحقيقي أكبر من الدخل النقدي", a: ["صح", "غلط"], c: "غلط" },
    { q: "في حالة الأزمات والحروب قد يكون هناك علاقة طردية بين السعر والكمية المطلوبة", a: ["صح", "غلط"], c: "صح" },
    { q: "إذا كانت مرونة العرض تساوي واحد فإن العرض يكون متكافئ المرونة", a: ["صح", "غلط"], c: "صح" },
    { q: "نقطة التوازن السوق هي النقطة التي يتساوي عندها الكمية المطلوبة مع الكمية المعروضة", a: ["صح", "غلط"], c: "صح" },
    { q: "كمية التوازن هي الكمية التي لا يتساوي عندها مع الكمية المطلوبة مع الكمية المعروضة", a: ["صح", "غلط"], c: "غلط" },
    { q: "الإنتاج أو العملية الإنتاجية تعني خلق الشيء", a: ["صح", "غلط"], c: "غلط" },
    { q: "تنحدر منحنيات السواء من أعلى إلى أسفل ومن اليسار لليمين", a: ["صح", "غلط"], c: "صح" },
    { q: "بزيادة استهلاك الفرد من وحدات السلع تتناقص المنفعة الحدية", a: ["صح", "غلط"], c: "صح" },
    { q: "تفترض نظرية المنفعة الحدية إمكانية قياس وحدات المنفعة بوحدات قياس محددة", a: ["صح", "غلط"], c: "صح" },
    { q: "أهملت نظرية المنفعة الحدية جانب الطلب وركزت على جانب العرض", a: ["صح", "غلط"], c: "غلط" },
    { q: "المنفعة الزمنية هي المنفعة التي تنشأ عن تغير شكل المادة", a: ["صح", "غلط"], c: "غلط" },
    { q: "المنفعة المكانية تعني نقل السلعة من مكان يقل الطلب عليه لمكان يكثر عليه الطلب", a: ["صح", "غلط"], c: "صح" },
    { q: "رأس المال الثابت هو الذي يستخدم أكثر من مرة في العملية الإنتاجية", a: ["صح", "غلط"], c: "صح" },
    { q: "الناتج الكلي يمثل الكمية المنتجة باستخدام قدر معين من العناصر الإنتاجية", a: ["صح", "غلط"], c: "صح" },
    { q: "التكاليف الثابتة هي التكاليف التي تتغير مع حجم الإنتاج", a: ["صح", "غلط"], c: "غلط" },
    { q: "العلاقة بين الكمية المطلوبة ودخل المستهلك في حالة السلعة الرديئة علاقة طردية", a: ["صح", "غلط"], c: "غلط" },
    { q: "الآلات من السلع الإنتاجية المعمرة", a: ["صح", "غلط"], c: "صح" },
    { q: "في حالة الطلب عديم المرونة فإن المرونة تساوي صفر", a: ["صح", "غلط"], c: "صح" },
    { q: "من محددات العرض التنبؤ بأسعار المستقبل", a: ["صح", "غلط"], c: "صح" },
    { q: "في دالة العرض العلاقة بين السعر والكمية المعروضة علاقة عكسية", a: ["صح", "غلط"], c: "غلط" },
    { q: "الاحتكار هو الحالة التي يوجد فيها بائع واحد وعدد كبير من المشترين", a: ["صح", "غلط"], c: "صح" },
    { q: "متوسط التكاليف المتغيرة تصل لأدنى نقطة قبل متوسط التكاليف الكلية", a: ["صح", "غلط"], c: "صح" },
    { q: "متوسط التكاليف الكلية تعني نصيب الوحدة الواحدة من الإنتاج من التكاليف الكلية", a: ["صح", "غلط"], c: "صح" },
    { q: "الأرض كعنصر إنتاج تعني مختلف الظروف الطبيعية المحيطة بالإنسان", a: ["صح", "غلط"], c: "صح" },
    { q: "عنصر رأس المال أكثر العناصر الإنتاجية عرضة للضياع", a: ["صح", "غلط"], c: "صح" },
    { q: "يصعب زيادة المعروض من عنصر العمل في المدى القصير", a: ["صح", "غلط"], c: "صح" },
    { q: "المنفعة الحدية تمثل منفعة آخر وحدة مستهلكة من السلع", a: ["صح", "غلط"], c: "صح" },

    // --- مجموعة الاختياري (25 سؤال) ---
    { q: "من السلع الاستهلاكية غير المعمرة:", a: ["الآلات والأكل", "الثلاجة والغسالة"], c: "الآلات والأكل" },
    { q: "من السلع الإنتاجية المعمرة:", a: ["الآلات", "الأكل", "الثلاجة والغسالة"], c: "الآلات" },
    { q: "من أهم عناصر الإنتاج:", a: ["الأرض", "رأس المال والعمل", "جميع ما سبق"], c: "جميع ما سبق" },
    { q: "العلم الذي يحاول سد احتياجات البشر في حدود الموارد المتاحة:", a: ["علم الاجتماع", "علم الاقتصاد", "علم النفس"], c: "علم الاقتصاد" },
    { q: "إذا كانت مرونة الطلب السعرية تساوي -2 فإن الطلب يكون:", a: ["مرن", "غير مرن", "عديم المرونة"], c: "مرن" },
    { q: "مرونة العرض السعرية تساوي 0.5 تعني أن العرض:", a: ["مرن", "غير مرن", "متكافئ"], c: "غير مرن" },
    { q: "مرونة الطلب الداخلية تساوي -3 تعني أن السلعة:", a: ["رديئة", "عادية", "كمالية"], c: "رديئة" },
    { q: "من محددات الطلب:", a: ["سعر السلعة نفسها", "سعر السلع الأخرى", "جميع ما سبق"], c: "جميع ما سبق" },
    { q: "المنفعة الناشئة عن نقل ملكية السلعة من شخص لآخر:", a: ["تملكية", "شخصية", "كمالية"], c: "تملكية" },
    { q: "المنفعة الناشئة عن تخزين السلعة من وقت لآخر:", a: ["تملكية", "كمية", "زمنية"], c: "زمنية" },
    { q: "المنحنى الذي يعطي مختلف التوليفات من سلعتين:", a: ["منحنى الطلب", "منحنى السواء", "منحنى العرض"], c: "منحنى السواء" },
    { q: "في دالة التكاليف يكون العامل التابع هو:", a: ["التكاليف", "الإنتاج", "عناصر الإنتاج"], c: "التكاليف" },
    { q: "في دالة الإنتاج يكون العامل المستقل هو:", a: ["التكاليف", "الإنتاج", "عناصر الإنتاج"], c: "عناصر الإنتاج" },
    { q: "من محددات العرض:", a: ["دخل المستهلك", "تغير التكاليف", "أذواق المستهلكين"], c: "تغير التكاليف" },
    { q: "الانتقال من نقطة لأخرى على نفس منحنى الطلب يسمى:", a: ["تغير الطلب", "تغير الكمية المطلوبة"], c: "تغير الطلب" },
    { q: "انتقال منحنى العرض بالكامل لليسار أو اليمين يسمى:", a: ["تغير حالة العرض", "تغير الكمية المعروضة"], c: "تغير حالة العرض" },
    { q: "من النظريات المفسرة لسلوك المستهلك:", a: ["العرض", "الطلب", "منحنيات السواء"], c: "منحنيات السواء" },
    { q: "من أنواع الأسواق:", a: ["المنافسة الكاملة", "منافسة القلة", "جميع ما سبق"], c: "جميع ما سبق" },
    { q: "القدر من الإشباع المستمد من استهلاك وحدات متتالية:", a: ["منفعة كلية", "منفعة حدية"], c: "منفعة كلية" },
    { q: "رأس المال الذي يستخدم مرة واحدة في العملية الإنتاجية:", a: ["رأس مال ثابت", "رأس مال متداول"], c: "رأس مال متداول" },
    { q: "الشخص المسؤول عن توزيع النسب على عناصر الإنتاج:", a: ["العامل", "المدير أو المنظم", "المستهلك"], c: "المدير أو المنظم" },
    { q: "مقدار الزيادة في الناتج الكلي عند زيادة المورد بوحدة واحدة:", a: ["الناتج الحدي", "الناتج المتوسط"], c: "الناتج الحدي" },
    { q: "السوق الذي يسود فيه بائع واحد للسلعة:", a: ["المنافسة الكاملة", "الاحتكار", "منافسة القلة"], c: "الاحتكار" },
    { q: "السوق الذي يوجد فيه عدد قليل من البائعين:", a: ["المنافسة الكاملة", "الاحتكار", "منافسة القلة"], c: "منافسة القلة" },
    { q: "من السلع الحرة:", a: ["الملابس", "الأكل", "الأمطار"], c: "الأمطار" }
];

let currentIdx = 0;
let score = 0;
let shuffledQs = [];

const qEl = document.getElementById('question');
const optEl = document.getElementById('options');
const nextBtn = document.getElementById('next-btn');
const scoreEl = document.getElementById('score');
const countEl = document.getElementById('q-count');
const progress = document.getElementById('progress');

function startQuiz() {
    shuffledQs = [...questions].sort(() => Math.random() - 0.5);
    currentIdx = 0;
    score = 0;
    scoreEl.innerText = "0";
    renderQuestion();
}

function renderQuestion() {
    optEl.innerHTML = '';
    nextBtn.classList.add('hide');
    let q = shuffledQs[currentIdx];
    qEl.innerText = q.q;
    countEl.innerText = currentIdx + 1;
    progress.style.width = `${((currentIdx + 1) / shuffledQs.length) * 100}%`;

    q.a.forEach(option => {
        const btn = document.createElement('button');
        btn.innerText = option;
        btn.classList.add('option');
        btn.onclick = () => {
            if (option === q.c) {
                btn.classList.add('correct');
                score++;
                scoreEl.innerText = score;
            } else {
                btn.classList.add('wrong');
                Array.from(optEl.children).forEach(b => {
                    if(b.innerText === q.c) b.classList.add('correct');
                });
            }
            Array.from(optEl.children).forEach(b => b.disabled = true);
            nextBtn.classList.remove('hide');
        };
        optEl.appendChild(btn);
    });
}

nextBtn.onclick = () => {
    currentIdx++;
    if (currentIdx < shuffledQs.length) {
        renderQuestion();
        window.scrollTo(0, 0);
    } else {
        qEl.innerText = `انتهى الاختبار! حصلت على ${score} من ${shuffledQs.length}`;
        optEl.innerHTML = `<button onclick="location.reload()" style="width:100%; padding:15px; background:#28a745; color:white; border:none; border-radius:8px;">إعادة المحاولة</button>`;
        nextBtn.classList.add('hide');
    }
};

document.addEventListener('DOMContentLoaded', startQuiz);
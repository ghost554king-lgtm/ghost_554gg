const questions = [
    // --- أسئلة الصح (T) والغلط (F) من الصور ---
    { q: "يعتبر علم الاقتصاد أحد العلوم الطبيعية البحتة", a: ["صح", "غلط"], c: "غلط" },
    { q: "تعتبر الشمس والأمطار أحد السلع الاقتصادية", a: ["صح", "غلط"], c: "غلط" },
    { q: "الثلاجة أحد الأمثلة على السلع الإنتاجية المعمرة", a: ["صح", "غلط"], c: "غلط" },
    { q: "يعتبر الأرض ورأس المال من الموارد الإنتاجية", a: ["صح", "غلط"], c: "صح" },
    { q: "ينحدر منحنى الطلب من أعلى لأسفل جهة اليسار", a: ["صح", "غلط"], c: "غلط" },
    { q: "تتميز الموارد الإنتاجية بالندرة النسبية", a: ["صح", "غلط"], c: "صح" },
    { q: "في حالة السلع الضرورية يتناسب السعر طردياً مع الإيراد الكلي", a: ["صح", "غلط"], c: "صح" },
    { q: "من محددات الطلب سعر السلعة وذوق المستهلكين والدخل فقط", a: ["صح", "غلط"], c: "غلط" },
    { q: "ينشأ تغير الطلب من العلاقة بين الكمية المطلوبة من سلعة وسعر سلعة أخرى", a: ["صح", "غلط"], c: "صح" },
    { q: "الطلب على العيش طلب غير مرن", a: ["صح", "غلط"], c: "صح" },
    { q: "كلما توفر للسلعة بدائل كلما ارتفعت مرونة الطلب عليها", a: ["صح", "غلط"], c: "صح" },
    { q: "العلاقة بين الدخل والكمية المطلوبة من سلعة معينة علاقة طردية", a: ["صح", "غلط"], c: "غلط" },
    { q: "قانون الطلب يوضح العلاقة الطردية بين السعر والكمية المطلوبة", a: ["صح", "غلط"], c: "غلط" },
    { q: "الدخل الحقيقي أكبر من الدخل النقدي", a: ["صح", "غلط"], c: "غلط" },
    { q: "في حالة الأزمات والحروب قد يكون هناك علاقة طردية بين السعر والكمية المطلوبة", a: ["صح", "غلط"], c: "صح" },
    { q: "إذا كانت مرونة العرض تساوي 1 فإن العرض يكون متكافئ المرونة", a: ["صح", "غلط"], c: "صح" },
    { q: "نقطة التعادل هي النقطة التي يتساوى عندها الكمية المطلوبة مع الكمية المعروضة", a: ["صح", "غلط"], c: "صح" },
    { q: "كمية التوازن هي الكمية التي لا يتساوى عندها الكمية المطلوبة مع الكمية المعروضة", a: ["صح", "غلط"], c: "غلط" },
    { q: "الإنتاج يعني خلق الشئ", a: ["صح", "غلط"], c: "غلط" },
    { q: "تنحدر منحنيات السواء من أعلى لأسفل ومن اليسار لليمين", a: ["صح", "غلط"], c: "صح" },
    { q: "بزيادة استهلاك الفرد من وحدات السلعة تتناقص المنفعة الحدية", a: ["صح", "غلط"], c: "صح" },
    { q: "تفترض نظرية المنفعة الحدية إمكانية قياس وحدات المنفعة بوحدات قياس محددة", a: ["صح", "غلط"], c: "صح" },
    { q: "أهملت نظرية المنفعة الحدية جانب الطلب وركزت على جانب العرض", a: ["صح", "غلط"], c: "غلط" },
    { q: "المنفعة الزمنية هي المنفعة التي تنشأ من تغير شكل المادة بحيث تصبح قادرة على إشباع حاجات", a: ["صح", "غلط"], c: "غلط" },
    { q: "المنفعة المكانية تعني نقل السلعة من مكان يقل الطلب عليها فيه إلى مكان يكثر الطلب عليها فيه", a: ["صح", "غلط"], c: "صح" },
    { q: "رأس المال الثابت هو رأس المال الذي يستخدم أكثر من مرة في العملية الإنتاجية", a: ["صح", "غلط"], c: "صح" },
    { q: "الناتج الكلي يمثل الكمية المنتجة من السلعة باستخدام قدر معين من العناصر الإنتاجية", a: ["صح", "غلط"], c: "صح" },
    { q: "التكاليف الثابتة هي التكاليف التي تتغير بتغير حجم الإنتاج", a: ["صح", "غلط"], c: "غلط" },
    { q: "العلاقة بين الطلب والدخل في حالة السلع الرديئة علاقة طردية", a: ["صح", "غلط"], c: "غلط" },
    { q: "الآلات من السلع الإنتاجية المعمرة", a: ["صح", "غلط"], c: "صح" },
    { q: "في حالة الطلب عديم المرونة فإن المرونة تساوي صفر", a: ["صح", "غلط"], c: "صح" },
    { q: "من محددات العرض التنبؤ بالأسعار في المستقبل", a: ["صح", "غلط"], c: "صح" },
    { q: "في مرونة العرض العلاقة بين السعر والكمية المعروضة علاقة عكسية", a: ["صح", "غلط"], c: "غلط" },
    { q: "الاحتكار هي الحالة التي يوجد فيها مشتري واحد وعدد كبير من البائعين", a: ["صح", "غلط"], c: "غلط" },
    { q: "متوسط التكاليف المتغيرة تصل إلى أدنى مستوى لها قبل أن تصل متوسط التكاليف الكلية", a: ["صح", "غلط"], c: "صح" },
    { q: "متوسط التكاليف الكلية تعني نصيب الوحدة الواحدة من الإنتاج من التكاليف الكلية", a: ["صح", "غلط"], c: "صح" },
    { q: "الأرض كعنصر من عناصر الإنتاج تعني مختلف الظروف الطبيعية التي تحيط بالإنسان", a: ["صح", "غلط"], c: "صح" },
    { q: "عنصر رأس المال أكثر العناصر الإنتاجية عرضة للضياع", a: ["صح", "غلط"], c: "صح" },
    { q: "يصعب زيادة المعروض من عنصر العمال في المدي القصير", a: ["صح", "غلط"], c: "صح" },
    { q: "المنفعة الحدية تمثل منفعة آخر وحدة مستهلكة من السلعة", a: ["صح", "غلط"], c: "صح" },

    // --- أسئلة الاختيار من متعدد من الصور ---
    { q: "المنحنى الذي يعطي مختلف التوليفات من سلعتين هو منحنى:", a: ["الإنتاج", "التكاليف", "السواء", "العرض"], c: "السواء" },
    { q: "في دالة التكاليف يكون العامل التابع هو:", a: ["الإنتاج", "التكاليف", "السواء", "العرض"], c: "التكاليف" },
    { q: "في دالة الإنتاج يكون العامل المستقل عناصر:", a: ["الإنتاج", "التكاليف", "السواء", "العرض"], c: "الإنتاج" },
    { q: "من محددات العرض:", a: ["دخل المستهلك", "ذوق المستهلك", "سعر السلعة", "تكاليف الإنتاج"], c: "تكاليف الإنتاج" },
    { q: "الحالة التي تنشأ من تأثير السعر وتسبب الانتقال من نقطة إلى نقطة على نفس منحنى الطلب تسمى:", a: ["تغير الطلب", "تغير حالة الطلب", "تغير العرض", "تغير حالة العرض"], c: "تغير الطلب" },
    { q: "الحالة التي تنشأ بتأثير أي عامل من العوامل المؤثرة على العرض وتسبب انتقال منحنى العرض بالكامل جهة اليمين أو اليسار تسمى:", a: ["تغير الطلب", "تغير حالة الطلب", "تغير العرض", "تغير حالة العرض"], c: "تغير حالة العرض" },
    { q: "من النظريات المفسرة لسلوك المستهلك نظرية:", a: ["الإنتاج", "التكاليف", "منحنيات السواء", "العرض"], c: "منحنيات السواء" },
    { q: "من أنواع الأسواق:", a: ["الاحتكار", "المنافسة التامة", "احتكار القلة", "جميع ما سبق"], c: "جميع ما سبق" },
    { q: "القدر من الإشباع الذي يحصل عليه المستهلك من استهلاك وحدات متتالية من السلعة:", a: ["المنفعة الحدية", "المنفعة الكلية", "المنفعة المتوسطة", "جميع ما سبق"], c: "المنفعة الكلية" },
    { q: "رأس المال الذي يستخدم مرة واحدة في العملية الإنتاجية يسمى:", a: ["الثابت", "المتداول", "الضائع", "جميع ما سبق"], c: "المتداول" },
    { q: "من السلع الاستهلاكية غير المعمرة:", a: ["الأكل", "الثلاجة", "الغسالة", "الآلات"], c: "الأكل" },
    { q: "من السلع الإنتاجية المعمرة:", a: ["الأكل", "الثلاجة", "الغسالة", "الآلات"], c: "الآلات" },
    { q: "من أهم عناصر الإنتاج:", a: ["رأس المال", "الأرض", "العمل", "جميع ما سبق"], c: "جميع ما سبق" },
    { q: "العلم الذي يحاول سد احتياجات البشر في حدود الموارد المتاحة:", a: ["الاجتماع", "الفلسفة", "الاقتصاد", "الفيزياء"], c: "الاقتصاد" },
    { q: "إذا كانت مرونة الطلب السعرية تساوي -2 يكون الطلب:", a: ["مرن", "غير مرن", "عديم المرونة", "متكافئ المرونة"], c: "مرن" },
    { q: "إذا كانت مرونة العرض تساوي 0.5 فإن ذلك يعني أن العرض:", a: ["مرن", "غير مرن", "عديم المرونة", "متكافئ المرونة"], c: "غير مرن" },
    { q: "إذا كانت مرونة الطلب الداخلية تساوي -3 فإن هذا يعني أن السلعة:", a: ["عادية", "كمالية", "رديئة", "ضرورية"], c: "رديئة" },
    { q: "من محددات الطلب:", a: ["دخل المستهلك", "ذوق المستهلك", "سعر السلعة", "جميع ما سبق"], c: "جميع ما سبق" },
    { q: "المنفعة التي تنشأ من نقل ملكية السلعة من شخص إلى شخص آخر:", a: ["زمنية", "تملكية", "مكانية", "خدمية"], c: "تملكية" },
    { q: "المنفعة التي تنشأ من تخزين السلعة في وقت يقل الطلب عليها إلى وقت يزيد الطلب فيه عليها:", a: ["زمنية", "تملكية", "مكانية", "خدمية"], c: "زمنية" }
];

let currentIdx = 0;
let score = 0;
let shuffledQs = [];

const qEl = document.getElementById('question');
const optEl = document.getElementById('options');
const nextBtn = document.getElementById('next-btn');
const scoreEl = document.getElementById('score');
const countEl = document.getElementById('q-count');
const progress = document.getElementById('progress');

function startQuiz() {
    // خلط الأسئلة لضمان عدم التكرار
    shuffledQs = [...questions].sort(() => Math.random() - 0.5);
    currentIdx = 0;
    score = 0;
    renderQuestion();
}

function renderQuestion() {
    optEl.innerHTML = '';
    nextBtn.classList.add('hide');
    let q = shuffledQs[currentIdx];
    qEl.innerText = q.q;
    countEl.innerText = currentIdx + 1;
    progress.style.width = `${((currentIdx + 1) / shuffledQs.length) * 100}%`;

    q.a.forEach(option => {
        const btn = document.createElement('button');
        btn.innerText = option;
        btn.classList.add('option');
        btn.onclick = () => selectAnswer(btn, option, q.c);
        optEl.appendChild(btn);
    });
}

function selectAnswer(btn, selected, correct) {
    if (selected === correct) {
        btn.classList.add('correct');
        score++;
        scoreEl.innerText = score;
    } else {
        btn.classList.add('wrong');
        Array.from(optEl.children).forEach(b => {
            if (b.innerText === correct) b.classList.add('correct');
        });
    }
    Array.from(optEl.children).forEach(b => b.disabled = true);
    nextBtn.classList.remove('hide');
}

nextBtn.onclick = () => {
    currentIdx++;
    if (currentIdx < shuffledQs.length) {
        renderQuestion();
        window.scrollTo(0, 0);
    } else {
        showResult();
    }
};

function showResult() {
    qEl.innerText = `انتهى الاختبار! حصلت على ${score} من ${shuffledQs.length}`;
    optEl.innerHTML = `<button onclick="location.reload()" style="width:100%; padding:15px; background:var(--success); color:white; border:none; border-radius:10px; cursor:pointer; font-weight:bold;">إعادة المحاولة</button>`;
    nextBtn.classList.add('hide');
}

document.addEventListener('DOMContentLoaded', startQuiz);